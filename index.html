<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planeamento: Viagem a Paris 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet">
    <!-- SCRIPTS PARA O CALENDÁRIO -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/@fullcalendar/core/locales/pt-br.global.min.js'></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f4f8; /* Um azul-acinzentado muito claro */
        }
        /* Efeito de "check" na checklist */
        .checklist-item input:checked + label {
            text-decoration: line-through;
            color: #9ca3af; /* Cinza claro */
        }
        .checklist-item input:checked + label .icon-box {
            background-color: #16a34a; /* Verde quando selecionado */
            color: white;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">

        <!-- CABEÇALHO E CONTADOR -->
       <header class="text-center py-12 rounded-2xl shadow-lg mb-12 bg-cover bg-center" style="background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://images.unsplash.com/photo-1502602898657-3e91760cbb34?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cGFyaXN8ZW58MHx8MHx8fDA%3D');">
    <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">Rumo a Paris!</h1>
    <p class="text-lg text-gray-200 mb-6">A nossa aventura aproxima-se...</p>
    <div id="countdown" class="flex justify-center space-x-4 md:space-x-8 text-white">
                <div>
                    <span id="days" class="text-4xl font-bold">00</span>
                    <span class="block text-sm">Dias</span>
                </div>
                <div>
                    <span id="hours" class="text-4xl font-bold">00</span>
                    <span class="block text-sm">Horas</span>
                </div>
                <div>
                    <span id="minutes" class="text-4xl font-bold">00</span>
                    <span class="block text-sm">Minutos</span>
                </div>
                <div>
                    <span id="seconds" class="text-4xl font-bold">00</span>
                    <span class="block text-sm">Segundos</span>
                </div>
            </div>
        </header>





        <!-- ACESSO AOS GUIAS -->
        <section>
<!--             <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Guias</h2> -->
             <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Card Guia Visual -->
                <a href="guia.html" class="block bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl hover:scale-105 transition-transform duration-300">
                    <div class="flex items-center text-green-800 mb-3">
                        <i class="fa-solid fa-map-location-dot text-2xl mr-3"></i>
                        <h3 class="text-xl font-bold">Guia Visual Resumido</h3>
                    </div>
                    <p class="text-gray-600">O nosso plano de viagem com imagens, curiosidades e destaques de cada dia. Ideal para inspiração e consulta rápida.</p>
                </a>
                <!-- Card Roteiro Detalhado -->
                <a href="roteiro.html" class="block bg-white p-6 rounded-2xl shadow-lg hover:shadow-xl hover:scale-105 transition-transform duration-300">
                     <div class="flex items-center text-blue-800 mb-3">
                        <i class="fa-solid fa-list-ol text-2xl mr-3"></i>
                        <h3 class="text-xl font-bold">Roteiro Hora a Hora</h3>
                    </div>
                    <p class="text-gray-600">A versão super detalhada com horários, transportes e todas as informações práticas para nos mantermos no caminho certo.</p>
                </a>
                <p></p>
             </div>
        </section>





<!-- TIMELINE DE PRÓXIMOS PASSOS (DINÂMICA) -->
<section class="mb-12">
    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Próximos Passos</h2>
    <!-- O JavaScript vai inserir os itens da timeline aqui -->
    <div id="timeline-container" class="space-y-8"></div>
</section>




<!-- SECÇÃO DO CALENDÁRIO -->
<section class="mb-12">
    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Calendário</h2>
    <div class="bg-white p-4 md:p-6 rounded-2xl shadow-lg">
        <div id='calendar'></div>
    </div>
</section>






        <!-- CHECKLIST -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Checklist de Preparação</h2>
            <div class="bg-white p-6 rounded-2xl shadow-lg space-y-4">
                <!-- Item da Checklist -->
                <div class="checklist-item flex items-center">
                    <input type="checkbox" id="check-aviao" class="hidden">
                    <label for="check-aviao" class="flex items-center cursor-pointer w-full">
                        <span class="icon-box w-8 h-8 mr-4 flex items-center justify-center border-2 border-gray-300 rounded-md transition-colors"><i class="fa-solid fa-check"></i></span>
                        <span class="text-lg">Reservar voos</span>
                    </label>
                </div>
                <!-- Item da Checklist -->
                <div class="checklist-item flex items-center">
                    <input type="checkbox" id="check-alojamento" class="hidden">
                    <label for="check-alojamento" class="flex items-center cursor-pointer w-full">
                        <span class="icon-box w-8 h-8 mr-4 flex items-center justify-center border-2 border-gray-300 rounded-md transition-colors"><i class="fa-solid fa-check"></i></span>
                        <span class="text-lg">Reservar alojamento</span>
                    </label>
                </div>
                 <!-- Item da Checklist -->
                <div class="checklist-item flex items-center">
                    <input type="checkbox" id="check-mochilas" class="hidden">
                    <label for="check-mochilas" class="flex items-center cursor-pointer w-full">
                        <span class="icon-box w-8 h-8 mr-4 flex items-center justify-center border-2 border-gray-300 rounded-md transition-colors"><i class="fa-solid fa-check"></i></span>
                        <span class="text-lg">Compra de mochilas</span>
                    </label>
                </div>

                 <!-- Item da Checklist -->
                <div class="checklist-item flex items-center">
                    <input type="checkbox" id="check-seguro" class="hidden">
                    <label for="check-seguro" class="flex items-center cursor-pointer w-full">
                        <span class="icon-box w-8 h-8 mr-4 flex items-center justify-center border-2 border-gray-300 rounded-md transition-colors"><i class="fa-solid fa-check"></i></span>
                        <span class="text-lg">Todos têm cartões de saúde europeus?</span>
                    </label>
                </div>
                <!-- Item da Checklist -->
                <div class="checklist-item flex items-center">
                    <input type="checkbox" id="check-cartoes" class="hidden">
                    <label for="check-cartoes" class="flex items-center cursor-pointer w-full">
                        <span class="icon-box w-8 h-8 mr-4 flex items-center justify-center border-2 border-gray-300 rounded-md transition-colors"><i class="fa-solid fa-check"></i></span>
                        <span class="text-lg">Verificar cartões (Revolut, etc.)</span>
                    </label>
                </div>
                <!-- Item da Checklist -->
                <div class="checklist-item flex items-center">
                    <input type="checkbox" id="check-malas" class="hidden">
                    <label for="check-malas" class="flex items-center cursor-pointer w-full">
                        <span class="icon-box w-8 h-8 mr-4 flex items-center justify-center border-2 border-gray-300 rounded-md transition-colors"><i class="fa-solid fa-check"></i></span>
                        <span class="text-lg">Preparar as malas</span>
                    </label>
                </div>
                <!-- Item da Checklist -->
                <div class="checklist-item flex items-center">
                    <input type="checkbox" id="check-transportes" class="hidden">
                    <label for="check-transportes" class="flex items-center cursor-pointer w-full">
                        <span class="icon-box w-8 h-8 mr-4 flex items-center justify-center border-2 border-gray-300 rounded-md transition-colors"><i class="fa-solid fa-check"></i></span>
                        <span class="text-lg">Bilhetes transportes públicos</span>
                    </label>
                </div>
            </div>
        </section>






<!-- SECÇÃO ORÇAMENTO DA VIAGEM (COM CUSTO POR ADULTO) -->
<section class="mb-12">
    <h2 class="text-3xl font-bold text-gray-800 mb-2 text-center">Orçamento da Viagem</h2>
    <p class="text-center text-gray-600 mb-6">Uma estimativa dos custos com as principais atividades.</p>

<!-- VISORES DE CUSTO (VERSÃO CORRIGIDA) -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
    <!-- CUSTO TOTAL PREVISTO -->
    <div class="bg-white p-6 rounded-2xl shadow-lg text-center">
        <h3 class="text-lg font-semibold text-gray-500 uppercase tracking-wider">Custo Total Previsto</h3>
        <p id="total-cost" class="text-4xl md:text-5xl font-bold text-green-600 mt-2">0.00 €</p>
    </div>
    <!-- NOVO: CUSTO POR ADULTO -->
    <div class="bg-white p-6 rounded-2xl shadow-lg text-center">
        <h3 class="text-lg font-semibold text-gray-500 uppercase tracking-wider">Custo Aprox.por Adulto</h3>
        <p id="per-adult-cost" class="text-4xl md:text-5xl font-bold text-blue-600 mt-2">0.00 €</p>
    </div>
</div>

    <div class="grid grid-cols-1 md:grid-cols-1 gap-8">
      
      
        <!-- CARD TORRE EIFFEL -->
        <div class="cost-card bg-white p-6 rounded-2xl shadow-lg flex flex-col">
            <h3 class="text-xl font-bold text-gray-800 mb-4"><i class="fa-solid fa-tower-observation mr-2 text-gray-400"></i>Torre Eiffel</h3>
            
            <div class="space-y-4 flex-grow">
                <!-- Opção 1: 2º Andar pelas Escadas (Adultos)-->
                <div class="flex items-center justify-between">
                    <div>
                        <h4 class="font-semibold">2º Andar pelas Escadas (Adultos)</h4>
                        <p class="text-sm text-gray-500">14,50 € por pessoa</p>
                    </div>
                    <!-- Adicionada a classe 'cost-adult' -->
                    <select id="budget-eiffel-stairs2-adult-qty" data-cost="14.50" class="cost-dropdown border-gray-300 rounded-md w-20 text-center">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                    </select>
                </div>
                
                <!-- Opção 2: 2º Andar pelas Escadas (Jovens) - SEM a classe 'cost-adult' -->
                <div class="flex items-center justify-between">
                    <div>
                        <h4 class="font-semibold">2º Andar pelas Escadas (Jovens)</h4>
                        <p class="text-sm text-gray-500">7,30 € por pessoa</p>
                    </div>
                    <select id="budget-eiffel-stairs2-jovem-qty" data-cost="7.30" class="cost-dropdown border-gray-300 rounded-md w-20 text-center">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                    </select>
                </div>

        <!-- Opção 3: Elevador 2º Andar (Adultos) -->
        <div class="flex items-center justify-between">
            <div>
                <h4 class="font-semibold">Elevador 2º Andar (Adultos)</h4>
                <p class="text-sm text-gray-500">23,10 € por pessoa</p>
            </div>
            <select id="budget-eiffel-lift2-adult-qty" data-cost="23.10" class="cost-dropdown cost-adult border-gray-300 rounded-md w-20 text-center">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
        </div>

        <!-- Opção 4: Elevador 2º Andar (Jovens) -->
        <div class="flex items-center justify-between">
            <div>
                <h4 class="font-semibold">Elevador 2º Andar (Jovens)</h4>
                <p class="text-sm text-gray-500">11,60 € por pessoa</p>
            </div>
            <select id="budget-eiffel-lift2-jovem-qty" data-cost="11.60" class="cost-dropdown border-gray-300 rounded-md w-20 text-center">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
            </select>
        </div>

        <!-- Opção 5: Escadas + Elevador Topo (Adultos) -->
        <div class="flex items-center justify-between">
            <div>
                <h4 class="font-semibold">Escadas + Elevador Topo (Adultos)</h4>
                <p class="text-sm text-gray-500">27,50 € por pessoa</p>
            </div>
            <select id="budget-eiffel-stairs-topo-adult-qty" data-cost="27.50" class="cost-dropdown cost-adult border-gray-300 rounded-md w-20 text-center">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
        </div>
        
        <!-- Opção 6: Escadas + Elevador Topo (Jovens) -->
        <div class="flex items-center justify-between">
            <div>
                <h4 class="font-semibold">Escadas + Elevador Topo (Jovens)</h4>
                <p class="text-sm text-gray-500">13,80 € por pessoa</p>
            </div>
            <select id="budget-eiffel-stairs-topo-jovem-qty" data-cost="13.80" class="cost-dropdown border-gray-300 rounded-md w-20 text-center">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
            </select>
        </div>                        
        
        <!-- Opção 7: Elevador Topo (Adultos) -->
        <div class="flex items-center justify-between">
            <div>
                <h4 class="font-semibold">Elevador Topo (Adultos)</h4>
                <p class="text-sm text-gray-500">36,10 € por pessoa</p>
            </div>
            <select id="budget-eiffel-lift-topo-adult-qty" data-cost="36.10" class="cost-dropdown cost-adult border-gray-300 rounded-md w-20 text-center">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
        </div>
        
        <!-- Opção 8: Elevador Topo (Jovens) -->
        <div class="flex items-center justify-between">
            <div>
                <h4 class="font-semibold">Elevador Topo (Jovens)</h4>
                <p class="text-sm text-gray-500">18,10 € por pessoa</p>
            </div>
            <select id="budget-eiffel-lift-topo-jovem-qty" data-cost="18.10" class="cost-dropdown border-gray-300 rounded-md w-20 text-center">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
            </select>
        </div>                        
        
    </div>

    <hr class="my-4">
    <div class="text-right"><span class="text-sm text-gray-500">Subtotal:</span><span class="subtotal font-bold text-lg ml-2">0.00 €</span></div>
</div>


                <!-- CARD SAINTE-CHAPELLE -->
                <div class="cost-card bg-white p-6 rounded-2xl shadow-lg flex flex-col">
                    <h3 class="text-xl font-bold text-gray-800 mb-4"><i class="fa-solid fa-church mr-2 text-gray-400"></i>Sainte-Chapelle</h3>
                    
                    <div class="space-y-4 flex-grow">
                        <!-- Opção Única -->
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">Bilhete Geral</h4>
                                <p class="text-sm text-gray-500">13,00 € por adulto</p>
                            </div>
                            <select id="budget-saintechappele-general-qty" data-cost="13.00" class="cost-dropdown cost-adult border-gray-300 rounded-md w-20 text-center">
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                            </select>
                        </div>
                    </div>
                    
                    <hr class="my-4">
                    <div class="text-right"><span class="text-sm text-gray-500">Subtotal:</span><span class="subtotal font-bold text-lg ml-2">0.00 €</span></div>
                </div>


                <!-- CARD VERSAILLES -->
                <div class="cost-card bg-white p-6 rounded-2xl shadow-lg flex flex-col">
                    <h3 class="text-xl font-bold text-gray-800 mb-4"><i class="fa-solid fa-landmark-dome mr-2 text-gray-400"></i>Versailles</h3>
                    
                    <div class="space-y-4 flex-grow">
                        <!-- Opção Única -->
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">Bilhete Geral</h4>
                                <p class="text-sm text-gray-500">32,00 € por pessoa</p>
                            </div>
                            <select id="budget-Versailles-general-qty" data-cost="32.00" class="cost-dropdown cost-adult border-gray-300 rounded-md w-20 text-center">
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                            </select>
                        </div>
                    </div>
                    
                    <hr class="my-4">
                    <div class="text-right"><span class="text-sm text-gray-500">Subtotal:</span><span class="subtotal font-bold text-lg ml-2">0.00 €</span></div>
                </div>



                <!-- CARD MUSEU DO LOUVRE -->
                <div class="cost-card bg-white p-6 rounded-2xl shadow-lg flex flex-col">
                    <h3 class="text-xl font-bold text-gray-800 mb-4"><i class="fa-solid fa-landmark-dome mr-2 text-gray-400"></i>Museu do Louvre</h3>
                    
                    <div class="space-y-4 flex-grow">
                        <!-- Opção Única -->
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">Bilhete Geral</h4>
                                <p class="text-sm text-gray-500">22,00 € por pessoa</p>
                            </div>
                            <select id="budget-louvre-general-qty" data-cost="22.00" class="cost-dropdown cost-adult border-gray-300 rounded-md w-20 text-center">
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                            </select>
                        </div>
                    </div>
                    
                    <hr class="my-4">
                    <div class="text-right"><span class="text-sm text-gray-500">Subtotal:</span><span class="subtotal font-bold text-lg ml-2">0.00 €</span></div>
                </div>


        <!-- CARD Palais Garnier -->
        <div class="cost-card bg-white p-6 rounded-2xl shadow-lg flex flex-col">
            <h3 class="text-xl font-bold text-gray-800 mb-4"><i class="fa-solid fa-masks-theater" mr-2 text-gray-400"></i> Palais Garnier</h3>
            
            <div class="space-y-4 flex-grow">


        <!-- Opção 1: (Adultos) -->
        <div class="flex items-center justify-between">
            <div>
                <h4 class="font-semibold">Bilhete Adultos</h4>
                <p class="text-sm text-gray-500">15,00 € por pessoa</p>
            </div>
            <select id="budget-Garnier-lift2-adult-qty" data-cost="15.00" class="cost-dropdown cost-adult border-gray-300 rounded-md w-20 text-center">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
        </div>

        <!-- Opção 1: (Jovens) -->
        <div class="flex items-center justify-between">
            <div>
                <h4 class="font-semibold">Bilhete Jovens</h4>
                <p class="text-sm text-gray-500">10,00 € por pessoa</p>
            </div>
            <select id="budget-Garnier-lift2-jovem-qty" data-cost="10.00" class="cost-dropdown border-gray-300 rounded-md w-20 text-center">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
            </select>
        </div>

    </div>

    <hr class="my-4">
    <div class="text-right"><span class="text-sm text-gray-500">Subtotal:</span><span class="subtotal font-bold text-lg ml-2">0.00 €</span></div>
</div>

                
                
                <!-- CARD TRANSPORTES PUBLICOS -->
                <div class="cost-card bg-white p-6 rounded-2xl shadow-lg flex flex-col">
                    <h3 class="text-xl font-bold text-gray-800 mb-4"><i class="fa-solid fa-train-subway mr-2 text-gray-400"></i>Transporte Públicos</h3>
                    
                    <div class="space-y-4 flex-grow">
                        <!-- Navigo Easy travel pass -->
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">Navigo Easy travel pass</h4>
                                <p class="text-sm text-gray-500">2,00 € por pessoa</p>
                            </div>
                            <select id="budget-transports-easy-qty" data-cost="2.00" class="cost-dropdown cost-adult border-gray-300 rounded-md w-20 text-center">
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                            </select>
                        </div>

                        <!-- Forfait Paris Visit 5 dias -->
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="font-semibold">Forfait Paris Visit 5 dias</h4>
                                <p class="text-sm text-gray-500">76,25 € por pessoa</p>
                            </div>
                            <select id="budget-transports-visit-qty" data-cost="76.25" class="cost-dropdown cost-adult border-gray-300 rounded-md w-20 text-center">
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                            </select>
                        </div>
                    </div>

                    <hr class="my-4">
                    <div class="text-right"><span class="text-sm text-gray-500">Subtotal:</span><span class="subtotal font-bold text-lg ml-2">0.00 €</span></div>
                </div>                
                
            </div>
        </section>


<!-- NOVA SECÇÃO: TIMELINE DE BILHETES -->
<section class="mb-12">
    <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Resumo de Bilhetes a comprar</h2>
    <!-- O JavaScript vai inserir a timeline aqui -->
    <div id="ticket-timeline-container" class="space-y-6"></div>
</section>


    </div>

    
    









    <!---------------------------------------------------------------------------------------------------------------------->
    <!-- SCRIPTS -->
  
    <!-- SCRIPT DO CONTADOR -->
    <script>
        const countdownDate = new Date(2025, 8, 19, 6, 0, 0).getTime();
        const x = setInterval(function() {
            const now = new Date().getTime();
            const distance = countdownDate - now;
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            document.getElementById("days").innerText = days.toString().padStart(2, '0');
            document.getElementById("hours").innerText = hours.toString().padStart(2, '0');
            document.getElementById("minutes").innerText = minutes.toString().padStart(2, '0');
            document.getElementById("seconds").innerText = seconds.toString().padStart(2, '0');
            if (distance < 0) {
                clearInterval(x);
                document.getElementById("countdown").innerHTML = "<div class='text-center w-full'><p class='text-2xl font-bold'>A VIAGEM COMEÇOU! BON VOYAGE!</p></div>";
            }
        }, 1000);
    </script>

    <!-- SCRIPT GERAL UNIFICADO PARA TODAS AS FUNCIONALIDADES (VERSÃO FINAL CORRIGIDA) -->
    <!-- Importar os scripts do Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-database-compat.js"></script>

    <script>
        // ==========================================================
        // 1. CONFIGURAÇÃO GERAL E INICIALIZAÇÃO
        // ==========================================================
        const firebaseConfig = {
          apiKey: "AIzaSyAt7jAk5r2tqSdyTf2m7MUebd_t7bbDTJk",
          authDomain: "planeamento-viagem-paris.firebaseapp.com",
          databaseURL: "https://planeamento-viagem-paris-default-rtdb.europe-west1.firebasedatabase.app",
          projectId: "planeamento-viagem-paris",
          storageBucket: "planeamento-viagem-paris.firebasestorage.app",
          messagingSenderId: "121000897121",
          appId: "1:121000897121:web:75662c01dc56926bf61820"
        };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();







        // ==========================================================
        // 2. FONTES DE DADOS (É SÓ AQUI QUE PRECISA DE EDITAR!)
        // ==========================================================
        const planningEvents = [
            { title: 'Comprar bilhetes para o Museu do Louvre', 
            date: '2025-06-18', 
            description: 'Comprar para o dia 22 de Setembro (Segunda-feira).', 
            status: 'pending', 
            color: '#dc2626' },
            
            { title: 'Comprar bilhetes para Versailles', 
            date: '2025-06-23', description: 'A partir desta data já é possivel comprar para o dia 21 de setembro.', 
            status: 'pending', 
            color: '#dc2626' },
            
            { title: 'Comprar bilhetes para a Sainte-Chapelle', 
            date: '2025-07-01', description: 'Em principio em julho já é possivel comprar os bilhetes. Verificar disponibilidade.', 
            status: 'pending', 
            color: '#dc2626' },
            
            { title: 'Comprar bilhetes para a Torre Eiffel', 
            date: '2025-07-18', 
            description: 'Os bilhetes ficam disponíveis com 2 meses de antecedência. Comprar para o dia 19 de Setembro (Sexta-feira).', 
            status: 'pending', 
            color: '#dc2626' },
            
            { title: 'Comprar bilhetes para o Palais Garnier', 
            date: '2025-07-22', 
            description: 'Comprar para o dia 22 de Setembro (Segunda-feira).', 
            status: 'pending', 
            color: '#dc2626' },
            
            { title: 'Fazer pagamento da casa de Paris', 
            date: '2025-08-25', 
            description: 'Fazer o pagamento final da reserva.', 
            status: 'pending', 
            color: '#ea580c' },
            
            { title: 'Reserva para entrada sem filas na Notre-Dame', 
            date: '2025-09-19', 
            description: 'A reserva só pode ser feita umas horas antes. Irá ser dificil apanhar um slot disponível.', 
            status: 'pending', 
            color: '#ea580c' },
            
            { title: 'VIAGEM!', 
            date: '2025-09-19', 
            endDate: '2025-09-24', 
            description: 'De 19 a 23 de Setembro.', 
            status: 'complete', 
            color: '#16a34a' }
        ];
        
        
        
        
        
        // ==========================================================
        // RESUMO DE BILHETES A COMPRAR
        // ==========================================================
        
        
        const tripItinerary = [
            { day: 'Dia 1', date: '19/09', 
            theme: 'Chegada e Torre Eiffel', 
            ticketedVenues: [
            { name: 'Torre Eiffel', icon: 'fa-tower-observation' }] },
            
            { day: 'Dia 2', date: '20/09', 
            theme: 'Coração Histórico', 
            ticketedVenues: [
            { name: 'Sainte-Chapelle', icon: 'fa-gem' }] },
            
            { day: 'Dia 3', date: '21/09', 
            theme: 'Realeza e Arte Boémia', 
            ticketedVenues: [
            { name: 'Palácio de Versalhes', icon: 'fa-crown' }, 
            { name: 'Arco do Triunfo (subida)', icon: 'fa-archway' }] },
            
            { day: 'Dia 4', date: '22/09', 
            theme: 'Imersão em Arte', 
            ticketedVenues: [
            { name: 'Museu do Louvre', icon: 'fa-landmark-dome' }, 
            { name: 'Ópera Garnier', icon: 'fa-masks-theater' }] },
            
            { day: 'Dia 5', date: '23/09', theme: 'Despedida e Regresso', ticketedVenues: [] }
        ];

        // ==========================================================
        // 3. DEFINIÇÃO DAS FUNÇÕES
        // ==========================================================

        function setupChecklist() {
            const checklistItems = document.querySelectorAll('.checklist-item input[type="checkbox"]');
            const checklistRef = database.ref('checklist');
            checklistRef.on('value', (snapshot) => {
                const data = snapshot.val();
                if (data) { checklistItems.forEach(item => { if (data[item.id] !== undefined) { item.checked = data[item.id]; } }); }
            });
            checklistItems.forEach(item => { item.addEventListener('change', (e) => { checklistRef.child(e.target.id).set(e.target.checked); }); });
        }

        function setupBudgetCalculator() {
            const budgetRef = database.ref('budget');
            const costDropdowns = document.querySelectorAll('.cost-dropdown');
            function updateAllCalculations() {
                let grandTotal = 0, perAdultTotal = 0;
                const costCards = document.querySelectorAll('.cost-card');
                costCards.forEach(card => {
                    let cardSubtotal = 0;
                    card.querySelectorAll('.cost-dropdown').forEach(dropdown => {
                        const quantity = parseInt(dropdown.value, 10);
                        const costPerItem = parseFloat(dropdown.dataset.cost);
                        const itemTotalCost = quantity * costPerItem;
                        cardSubtotal += itemTotalCost;
                        grandTotal += itemTotalCost;
                        if (dropdown.classList.contains('cost-adult') && quantity > 0) { perAdultTotal += costPerItem; }
                    });
                    const subtotalElement = card.querySelector('.subtotal');
                    if (subtotalElement) { subtotalElement.textContent = `${cardSubtotal.toFixed(2)} €`; }
                });
                document.getElementById('total-cost').textContent = `${grandTotal.toFixed(2)} €`;
                document.getElementById('per-adult-cost').textContent = `${perAdultTotal.toFixed(2)} €`;
            }
            budgetRef.on('value', (snapshot) => {
                const data = snapshot.val();
                if (data) { costDropdowns.forEach(dropdown => { if (data[dropdown.id] !== undefined) { dropdown.value = data[dropdown.id]; } }); }
                updateAllCalculations();
            });
            costDropdowns.forEach(dropdown => { dropdown.addEventListener('change', (e) => { budgetRef.child(e.target.id).set(parseInt(e.target.value, 10)); }); });
            updateAllCalculations();
        }

        function renderTimeline() {
            const timelineContainer = document.getElementById('timeline-container');
            if (!timelineContainer) return;
            timelineContainer.innerHTML = '';
            planningEvents.forEach(event => {
                if (event.title === 'VIAGEM!') return;
                const eventDate = new Date(event.date + 'T00:00:00');
                const month = eventDate.toLocaleString('pt-PT', { month: 'short' }).toUpperCase().replace('.', '');
                const day = eventDate.getDate();
                const isComplete = event.status === 'complete';
                const itemHTML = `<div class="flex items-start space-x-4 ${isComplete ? 'opacity-60' : ''}"><div class="flex flex-col items-center"><span class="text-lg font-semibold ${isComplete ? 'text-gray-500' : 'text-green-700'}">${month}</span><span class="text-2xl font-bold ${isComplete ? 'text-gray-500' : 'text-green-700'}">${day}</span></div><div class="bg-white p-4 rounded-lg shadow-md flex-1"><h3 class="font-semibold text-lg ${isComplete ? 'line-through' : ''}">${event.title}</h3><p class="text-sm text-gray-600">${event.description}</p><div class="mt-2 text-sm font-medium ${isComplete ? 'text-green-600' : 'text-yellow-600'}"><i class="fa-solid ${isComplete ? 'fa-check-circle' : 'fa-hourglass-half'} mr-2"></i>${isComplete ? 'Concluído' : 'Pendente'}</div></div></div>`;
                timelineContainer.innerHTML += itemHTML;
            });
        }

        function renderCalendar() {
            const calendarEl = document.getElementById('calendar');
            if (!calendarEl) return;
            const modal = document.getElementById('event-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalDescription = document.getElementById('modal-description');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const calendarEvents = planningEvents.map(event => ({ title: event.title, start: event.date, end: event.endDate, backgroundColor: event.color, borderColor: event.color, allDay: true, extendedProps: { description: event.description || 'Não há detalhes adicionais.' } }));
            const calendar = new FullCalendar.Calendar(calendarEl, { initialView: 'dayGridMonth', locale: 'pt-br', headerToolbar: { left: 'prev,next today', center: 'title', right: '' }, events: calendarEvents, eventClick: function(info) { info.jsEvent.preventDefault(); modalTitle.textContent = info.event.title; modalDescription.textContent = info.event.extendedProps.description; modal.classList.remove('hidden'); } });
            function closeModal() { modal.classList.add('hidden'); }
            modalCloseBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', function(e) { if (e.target === modal) { closeModal(); } });
            calendar.render();
        }

        function renderTicketTimeline() {
            const container = document.getElementById('ticket-timeline-container');
            if (!container) return;
            container.innerHTML = '';
            tripItinerary.forEach(day => {
                let venuesHTML = '';
                if (day.ticketedVenues.length > 0) {
                    venuesHTML = `<ul class="mt-2 space-y-2">` + day.ticketedVenues.map(venue => `<li class="flex items-center text-gray-700"><i class="fa-solid ${venue.icon} w-6 text-center mr-2 text-blue-500"></i><span>${venue.name}</span></li>`).join('') + `</ul>`;
                } else {
                    venuesHTML = `<p class="mt-2 text-gray-500 italic">Nenhum bilhete necessário para este dia.</p>`;
                }
                const dayHTML = `<div class="bg-white p-6 rounded-2xl shadow-lg flex items-start space-x-4"><div class="text-center border-r pr-4"><p class="text-lg font-bold text-gray-800">${day.day}</p><p class="text-sm text-gray-500">${day.date}</p></div><div class="flex-grow"><h4 class="font-semibold text-lg text-gray-900">${day.theme}</h4>${venuesHTML}</div></div>`;
                container.innerHTML += dayHTML;
            });
        }

        // ==========================================================
        // 4. OUVINTE PRINCIPAL (EXECUTA TUDO QUANDO A PÁGINA ESTÁ PRONTA)
        // ==========================================================
        document.addEventListener('DOMContentLoaded', () => {
            setupChecklist();
            setupBudgetCalculator();
            renderTimeline();
            renderCalendar();
            renderTicketTimeline();
        });
    </script>

    <!-- ESTRUTURA DO POPUP/MODAL -->
    <div id="event-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-xl p-6 md:p-8 w-full max-w-md relative">
            <button id="modal-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-gray-800 transition">
                <i class="fa-solid fa-xmark fa-2x"></i>
            </button>
            <h3 id="modal-title" class="text-2xl font-bold text-gray-800 mb-4">Título do Evento</h3>
            <p id="modal-description" class="text-gray-600">Descrição detalhada do evento irá aparecer aqui.</p>
        </div>
    </div>

</body>
</html>
